<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Reader - อ่านเร็วขึ้น</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts สำหรับภาษาไทย -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap">
    <style>
        /* ---------------------------
           CSS Variables & Global Styles
        --------------------------- */
        :root {
            --primary-color: #0d6efd;
            --accent-color: #fd7e14;
            --highlight-color: #ff0019;
            --success-color: #1eff00;
            --navbar-height: 72px;
            --body-bg: #ffffff;
            --body-color: #212529;
            --card-bg: #f8f9fa;
            --card-border-color: #dee2e6;
            /* Colors for navbar gradient animation */
            --color-1: #4e54c8;
            --color-2: #8f94fb;
            --color-3: #bc4e9c;
            --color-4: #f80759;
            --color-5: #db5aff;
            --color-6: #38ef7d;
        }

        [data-bs-theme="dark"] {
            --body-bg: #121212;
            --body-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --card-border-color: #333333;
            --primary-color: #835ce7;
            --accent-color: #ff9f43;
            --highlight-color: #ff6b6b;
            --success-color: #00e676;
            --color-1: #959800;
            --color-2: #028e00;
            --color-3: #00c099;
            --color-4: #0055aa;
            --color-5: #5c00b8;
            --color-6: #a10000;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background-color: var(--body-bg);
            color: var(--body-color);
            transition: background-color 0.3s, color 0.3s;
            padding-top: var(--navbar-height); /* Leave space for fixed navbar */
        }

        /* ---------------------------
           Navbar & Animation
        --------------------------- */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--navbar-height);
            z-index: 1030;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* ปรับปรุงการแสดงผล Navbar สีให้เปลี่ยนแบบไหลลื่นทั่วแถบ */
        .navbar-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                var(--color-1),
                var(--color-2),
                var(--color-3),
                var(--color-4),
                var(--color-5),
                var(--color-6)
            );
            background-size: 300% 300%;
            animation: gradientShift 12s ease infinite;
            z-index: -1;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .navbar-reading .navbar-bg {
            animation-duration: 6s !important;
        }

        .navbar .navbar-brand,
        .navbar .nav-link,
        .navbar .navbar-text,
        .navbar-toggler-icon {
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
        }

        .navbar-brand i {
            font-size: 1.2rem;
        }

        .nav-link {
            font-weight: 500;
            padding: 0.5rem 1rem;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: white;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* ---------------------------
           Card & Display Styles
        --------------------------- */
        .card {
            background-color: var(--card-bg);
            border-color: var(--card-border-color);
            transition: background-color 0.3s, border-color 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 1.5rem;
            border-radius: 0.75rem;
        }

        .display-word {
            font-size: 3rem;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 400;
            line-height: 1.3;
            padding: 10px;
        }

        .highlight {
            color: var(--highlight-color);
            font-weight: 700;
        }

        /* ---------------------------
           Theme Toggle Button
        --------------------------- */
        .btn-theme {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            transition: transform 0.3s ease, background 0.3s ease;
        }

        .btn-theme:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
        }

        /* ---------------------------
           Timer Style
        --------------------------- */
        .timer {
            background-color: var(--accent-color);
            color: white;
            border-radius: 0.25rem;
            padding: 0.25rem 0.75rem;
            font-weight: bold;
            margin-left: 1rem;
        }

        /* ปรับสีของ input[type=range] ให้เห็นชัดใน light mode */
        :root .form-range::-webkit-slider-runnable-track {
            background: #c6c6c6;
            height: 0.5rem;
        }
        :root .form-range::-webkit-slider-thumb {
            background: var(--primary-color);
        }
        :root .form-range:focus::-webkit-slider-thumb {
            box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.25);
        }
        :root .form-range::-moz-range-track {
            background: #238ffc;
            height: 0.5rem;
        }
        :root .form-range::-ms-fill-lower,
        :root .form-range::-ms-fill-upper {
            background: #dee2e6;
        }
        :root .form-range::-ms-thumb {
            background: var(--primary-color);
        }
        :root .form-range:focus::-ms-thumb {
            box-shadow: 0 0 0 0.25rem rgba(13,110,253,.25);
        }
        :root .form-range {
            background-color: transparent;
        }

        @media (max-width: 768px) {
            .display-word {
                font-size: 2rem;
                min-height: 100px;
            }
        }
    </style>
</head>

<body>
    <!-- Navbar with Theme Toggle -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="navbar-bg"></div>
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-book-reader"></i>
                Speed Reader
            </a>
            <button id="theme-toggle" class="btn-theme">
                <i class="fas fa-sun text-white"></i>
            </button>
        </div>
    </nav>

    <div class="container py-4">
        <!-- Card: Text Input -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">ข้อความของคุณ</h5>
            </div>
            <div class="card-body">
                <textarea id="text-input" class="form-control mb-3" rows="4" placeholder="พิมพ์หรือวางข้อความที่นี่..."></textarea>
            </div>
        </div>

        <!-- Card: Settings -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">การตั้งค่า</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="speed" class="form-label fw-bold">ความเร็ว (คำต่อนาที)</label>
                    <div class="d-flex align-items-center">
                        <input type="range" class="form-range me-3" id="speed" min="50" max="2000" step="10" value="300">
                        <span id="speed-value" class="badge bg-primary px-3 py-2">300</span>
                    </div>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <button id="start" class="btn btn-primary">
                        <i class="fas fa-play me-2"></i> เริ่มอ่าน
                    </button>
                    <button id="pause" class="btn btn-warning">
                        <i class="fas fa-pause me-2"></i> หยุดชั่วคราว
                    </button>
                    <button id="reset" class="btn btn-secondary">
                        <i class="fas fa-redo me-2"></i> เริ่มใหม่
                    </button>
                    <a href="wordcount.html" id="goindex" class="btn btn-success">
                        <i class="fas fa-home me-2"></i> กลับไปที่การนับคำ
                    </a>
                </div>
            </div>
        </div>

        <!-- Card: Reading Display -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">หน้าจอการอ่าน</h5>
                <div id="timer" class="timer d-none">00:00</div>
            </div>
            <div class="card-body">
                <div id="display" class="display-word text-center">คำจะแสดงที่นี่</div>
                <div class="progress mt-3" style="height: 8px;">
                    <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
                <div class="d-flex justify-content-between mt-2 text-muted small">
                    <span id="current-word">0</span>
                    <span id="total-words">0 คำ</span>
                </div>
            </div>
        </div>

        <!-- Card: Reading Tips -->
        <div class="card" id="tips">
            <div class="card-header">
                <h5 class="mb-0">เคล็ดลับการอ่านเร็ว</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">ฝึกอ่านแบบนี้วันละ 10-15 นาทีเพื่อเพิ่มความเร็ว</li>
                    <li class="list-group-item">เริ่มต้นด้วยความเร็วที่สบาย ค่อยๆ เพิ่มทีละ 50 คำต่อนาที</li>
                    <li class="list-group-item">หลีกเลี่ยงการ subvocalization เพื่ออ่านเร็วขึ้น</li>
                    <li class="list-group-item">หลังจากอ่านจบ ลองทบทวนความเข้าใจเนื้อหาที่อ่าน</li>
                </ul>
            </div>
        </div>

        <!-- Card: About -->
        <div class="card" id="about">
            <div class="card-header">
                <h5 class="mb-0">เกี่ยวกับโปรแกรม</h5>
            </div>
            <div class="card-body">
                <p class="mb-0">Speed Reader เป็นเครื่องมือออนไลน์ที่ช่วยให้คุณฝึกอ่านเร็วผ่านการแสดงคำทีละคำ เหมาะสำหรับนักเรียนและผู้ที่ต้องการพัฒนาทักษะการอ่าน</p>
            </div>
        </div>
    </div>

    <footer class="py-3 text-center text-muted">
        <div class="container">
            <p class="mb-0">Speed Reader © 2025 - อ่านเร็วขึ้น เรียนรู้มากขึ้น</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../model/speedread.model.js"></script>
    <script src="../controller/speedread.controller.js"></script>
    <!-- การแสดงผลคำที่อ่าน -->
    <script>
        class SpeedReadView {
    constructor() {
        this.displayArea = document.getElementById('display');
        this.progressBar = document.getElementById('progress-bar');
        this.currentWordElement = document.getElementById('current-word');
        this.totalWordsElement = document.getElementById('total-words');
        this.timerElement = document.getElementById('timer');
        this.navbar = document.querySelector('.navbar');
        this.speedValue = document.getElementById('speed-value');
    }

    updateWordCount(total) {
        this.totalWordsElement.textContent = total + ' คำ';
        this.currentWordElement.textContent = '0';
    }

    updateProgress(current, total) {
        if (total === 0) {
            this.progressBar.style.width = '0%';
            this.currentWordElement.textContent = '0';
            return;
        }
        const progress = (current / total) * 100;
        this.progressBar.style.width = progress + '%';
        this.currentWordElement.textContent = current;
    }

    displayWord(word) {
        if (!word) {
            this.displayArea.textContent = "";
            return;
        }
        const orp = Math.max(1, Math.floor(word.length / 3));
        const pre = word.substring(0, orp);
        const highlight = word.substring(orp, orp + 1);
        const post = word.substring(orp + 1);
        this.displayArea.innerHTML = pre + '<span class="highlight">' + highlight + '</span>' + post;
    }

    showFinish() {
        this.displayArea.innerHTML = '<span class="text-success">เสร็จสิ้น! 🎉</span>';
    }

    resetDisplay() {
        this.displayArea.textContent = "คำจะแสดงที่นี่";
    }

    setSpeedValue(val) {
        this.speedValue.textContent = val;
    }

    showTimer() {
        this.timerElement.classList.remove('d-none');
    }

    hideTimer() {
        this.timerElement.classList.add('d-none');
        this.timerElement.textContent = "00:00";
    }

    updateTimer(minutes, seconds) {
        this.timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    setNavbarReading(isReading) {
        if (isReading) this.navbar.classList.add('navbar-reading');
        else this.navbar.classList.remove('navbar-reading');
    }
}
    </script>
</body>

</html>